{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\project\\\\react\\\\ssr\\\\create-next-app\\\\create-next-app\\\\components\\\\modal\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport { Rnd } from \"react-rnd\";\nimport PropTypes from 'prop-types';\nimport './index.less';\nvar headerHeight = 54,\n    footerHeight = 53;\n\nvar DragBody =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DragBody, _React$Component);\n\n  function DragBody(props) {\n    var _this;\n\n    _classCallCheck(this, DragBody);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DragBody).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onDrag\", function () {\n      if (!_this.state.isDragging) {\n        _this.setState({\n          isDragging: true\n        });\n      }\n\n      _this.props.onDrag && _this.props.onDrag();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStop\", function (e, d) {\n      _this.setState({\n        x: d.x,\n        y: d.y,\n        isDragging: false\n      });\n\n      _this.props.onDragStop && _this.props.onDragStop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStart\", function () {\n      _this.setState({\n        isResizing: true\n      });\n\n      _this.props.onResizeStart && _this.props.onResizeStart();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function (e, direction, ref, delta, position) {\n      _this.setState(_objectSpread({}, position, {\n        isResizing: true\n      }));\n\n      _this.props.onResize && _this.props.onResize();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStop\", function (e, direction, ref, delta, position) {\n      _this.setState(_objectSpread({\n        width: ref.style.width,\n        height: ref.style.height\n      }, position, {\n        isResizing: false\n      }));\n\n      _this.props.onResizeStop && _this.props.onResizeStop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      _this.refreshHeight();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"refreshHeight\", function () {\n      if (!_this.state.height) {\n        _this.setState({\n          height: _this.body.current.clientHeight + headerHeight + footerHeight\n        });\n      }\n    });\n\n    _this.state = {\n      x: 0,\n      y: 0,\n      isResizing: false,\n      // 是否正在拉伸\n      isDragging: false,\n      // 是否正在拖拽\n      width: props.width,\n      // 内容区域的宽度\n      height: _parseInt(props.height) // 内容区域的高度\n\n    };\n    _this.body = React.createRef();\n    return _this;\n  }\n\n  _createClass(DragBody, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          x = _this$state.x,\n          y = _this$state.y,\n          width = _this$state.width,\n          height = _this$state.height,\n          isResizing = _this$state.isResizing,\n          isDragging = _this$state.isDragging;\n      var _this$props = this.props,\n          minWidth = _this$props.minWidth,\n          minHeight = _this$props.minHeight,\n          title = _this$props.title,\n          enableResizing = _this$props.enableResizing,\n          onCancel = _this$props.onCancel,\n          cancelText = _this$props.cancelText,\n          onOk = _this$props.onOk,\n          okText = _this$props.okText,\n          footer = _this$props.footer;\n      return React.createElement(Rnd, {\n        className: {\n          'rnd-resize': isResizing,\n          'rnd-drag': isDragging\n        },\n        dragHandleClassName: \"rnd-modal-header\",\n        bounds: \"window\",\n        enableResizing: enableResizing,\n        minWidth: minWidth,\n        minHeight: minHeight,\n        size: {\n          width: width,\n          height: height\n        },\n        position: {\n          x: x,\n          y: y\n        },\n        onDrag: this.onDrag,\n        onDragStop: function onDragStop(e, d) {\n          return _this2.onDragStop(e, d);\n        },\n        onResize: this.onResize,\n        onResizeStart: this.onResizeStart,\n        onResizeStop: function onResizeStop(e, direction, ref, delta, position) {\n          return _this2.onResizeStop(e, direction, ref, delta, position);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: width,\n          height: height,\n          background: \"#FFFFFF\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"rnd-modal-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"rnd-modal-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, title), React.createElement(_Icon, {\n        type: \"close\",\n        className: \"icon-close\",\n        onClick: onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"rnd-modal-container\",\n        style: {\n          display: isDragging ? \"none\" : \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"rnd-modal-body\",\n        style: {\n          height: \"calc(\".concat(_parseInt(height), \"px - \").concat(headerHeight, \"px - \").concat(footerHeight, \"px\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        ref: this.body,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, this.props.children)), footer ? React.createElement(\"div\", {\n        className: \"rnd-modal-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, footer) : React.createElement(\"div\", {\n        className: \"rnd-modal-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        onClick: onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, cancelText), React.createElement(_Button, {\n        type: \"primary\",\n        onClick: onOk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, okText)))));\n    }\n  }]);\n\n  return DragBody;\n}(React.Component);\n\nvar DragModal =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(DragModal, _React$Component2);\n\n  function DragModal(props) {\n    var _this3;\n\n    _classCallCheck(this, DragModal);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(DragModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this3), \"refreshHeight\", function () {\n      if (_this3.body.current) {\n        _this3.body.current.refreshHeight();\n      }\n    });\n\n    _this3.body = React.createRef();\n    return _this3;\n  }\n\n  _createClass(DragModal, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(_Modal, _extends({}, this.props, {\n        closable: null,\n        footer: null,\n        title: null,\n        destroyOnClose: true,\n        wrapClassName: this.props.wrapClassName ? \"rnd-move-modal \".concat(this.props.wrapClassName) : 'rnd-move-modal',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(DragBody, _extends({\n        ref: this.body\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return DragModal;\n}(React.Component);\n\nDragModal.defaultProps = {\n  cancelText: '取消',\n  okText: '确定',\n  width: 520,\n  // modal  宽度默认值\n  height: 0,\n  // modal 高度默认值0，即由内容自动撑开。\n  minWidth: 300,\n  // 自定义拉伸缩小的最小宽度默认值\n  minHeight: 200,\n  // 自定义拉伸缩小的最小高度默认值\n  enableResizing: {\n    // 可拉伸的方向\n    top: true,\n    right: true,\n    bottom: true,\n    left: true,\n    topRight: true,\n    bottomRight: true,\n    bottomLeft: true,\n    topLeft: true\n  }\n};\nDragModal.propTypes = {\n  refreshHeight: PropTypes.func\n};\nexport default DragModal;","map":{"version":3,"sources":["E:/project/react/ssr/create-next-app/create-next-app/components/modal/index.js"],"names":["React","Rnd","PropTypes","headerHeight","footerHeight","DragBody","props","state","isDragging","setState","onDrag","e","d","x","y","onDragStop","isResizing","onResizeStart","direction","ref","delta","position","onResize","width","style","height","onResizeStop","refreshHeight","body","current","clientHeight","createRef","minWidth","minHeight","title","enableResizing","onCancel","cancelText","onOk","okText","footer","background","display","children","Component","DragModal","wrapClassName","defaultProps","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","propTypes","func"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Rnd } from \"react-rnd\"\r\nimport { Modal, Button, Icon } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport './index.less'\r\n\r\nconst headerHeight = 54,\r\n      footerHeight = 53;\r\n\r\nclass DragBody extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            x: 0,\r\n            y: 0,\r\n            isResizing: false,       // 是否正在拉伸\r\n            isDragging: false,       // 是否正在拖拽\r\n            width: props.width,      // 内容区域的宽度\r\n            height: parseInt(props.height),    // 内容区域的高度\r\n        }\r\n        this.body = React.createRef()\r\n    }\r\n    onDrag = () => {\r\n        if (!this.state.isDragging) { this.setState({ isDragging: true }) }\r\n        this.props.onDrag && this.props.onDrag()\r\n    }\r\n    onDragStop = (e, d) => {\r\n        this.setState({ x: d.x, y: d.y, isDragging: false })\r\n        this.props.onDragStop && this.props.onDragStop() \r\n    }\r\n    onResizeStart = () => {\r\n        this.setState({ isResizing: true })\r\n        this.props.onResizeStart && this.props.onResizeStart() \r\n    }\r\n    onResize = (e, direction, ref, delta, position) => {\r\n        this.setState({\r\n            // width: ref.style.width,\r\n            // height: ref.style.height,\r\n            ...position,\r\n            isResizing: true\r\n        })\r\n        this.props.onResize && this.props.onResize() \r\n    }\r\n    onResizeStop = (e, direction, ref, delta, position) => {\r\n        this.setState({\r\n            width: ref.style.width,\r\n            height: ref.style.height,\r\n            ...position,\r\n            isResizing: false\r\n        })\r\n        this.props.onResizeStop && this.props.onResizeStop() \r\n    }\r\n    componentDidMount = () => {\r\n        this.refreshHeight()\r\n    }\r\n    // 如果没有 modal 没有传入高度，modal 的高度自动撑开 = bodyHeight + headerHeight + footerHeight\r\n    refreshHeight = () => {\r\n        if (!this.state.height) {\r\n            this.setState({\r\n                height: this.body.current.clientHeight + headerHeight + footerHeight\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        const { x, y, width, height, isResizing, isDragging } = this.state\r\n        const { minWidth, minHeight, title, enableResizing, onCancel, cancelText, onOk, okText, footer } = this.props\r\n        return (\r\n            <Rnd\r\n                className={{ 'rnd-resize': isResizing, 'rnd-drag': isDragging }}\r\n                dragHandleClassName=\"rnd-modal-header\"\r\n                bounds=\"window\"\r\n                enableResizing={enableResizing}\r\n                minWidth={minWidth}\r\n                minHeight={minHeight}\r\n                size={{ width, height }}\r\n                position={{ x, y }}\r\n                onDrag={this.onDrag}\r\n                onDragStop={(e, d) => this.onDragStop(e, d)}\r\n                onResize={this.onResize}\r\n                onResizeStart={this.onResizeStart}\r\n                onResizeStop={(e, direction, ref, delta, position) => this.onResizeStop(e, direction, ref, delta, position)}\r\n            >\r\n                <div\r\n                    style={{\r\n                        width,\r\n                        height,\r\n                        background: \"#FFFFFF\",\r\n                    }}\r\n                >\r\n                    <div className=\"rnd-modal-header\">\r\n                        <div className=\"rnd-modal-title\">{title}</div>\r\n                        <Icon type=\"close\" className=\"icon-close\" onClick={onCancel}></Icon>\r\n                    </div>\r\n                    <div className=\"rnd-modal-container\" style={{ display: isDragging ? \"none\" : \"block\", }}>\r\n                        <div className=\"rnd-modal-body\" style={{ height: `calc(${parseInt(height)}px - ${headerHeight}px - ${footerHeight}px` }}>\r\n                            <div ref={this.body}>{this.props.children}</div>\r\n                        </div>\r\n\r\n                        {footer\r\n                            ? <div className=\"rnd-modal-footer\">{footer}</div>\r\n                            : <div className=\"rnd-modal-footer\">\r\n                                <Button onClick={onCancel}>{cancelText}</Button>\r\n                                <Button type=\"primary\" onClick={onOk}>{okText}</Button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Rnd>\r\n        )\r\n    }\r\n}\r\n\r\nclass DragModal extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.body = React.createRef()\r\n    }\r\n\r\n    refreshHeight = () => {\r\n        if (this.body.current) {\r\n            this.body.current.refreshHeight()\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <Modal\r\n                {...this.props}\r\n                closable={null}\r\n                footer={null}\r\n                title={null}\r\n                destroyOnClose={true}\r\n                wrapClassName={this.props.wrapClassName ?  `rnd-move-modal ${this.props.wrapClassName}` : 'rnd-move-modal'}\r\n            >\r\n                <DragBody ref={this.body}  {...this.props} />\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nDragModal.defaultProps = {\r\n    cancelText: '取消',\r\n    okText: '确定',\r\n    width: 520,        // modal  宽度默认值\r\n    height: 0,         // modal 高度默认值0，即由内容自动撑开。\r\n    minWidth: 300,     // 自定义拉伸缩小的最小宽度默认值\r\n    minHeight: 200,    // 自定义拉伸缩小的最小高度默认值\r\n    enableResizing: {   // 可拉伸的方向\r\n        top: true,\r\n        right: true,\r\n        bottom: true,\r\n        left: true,\r\n        topRight: true,\r\n        bottomRight: true,\r\n        bottomLeft: true,\r\n        topLeft: true\r\n    }\r\n}\r\n\r\nDragModal.propTypes = {\r\n    refreshHeight: PropTypes.func\r\n}\r\n\r\nexport default DragModal\r\n"]},"metadata":{},"sourceType":"module"}