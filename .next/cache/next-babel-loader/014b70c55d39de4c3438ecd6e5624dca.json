{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nimport \"antd/lib/input-number/style\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"E:\\\\project\\\\react\\\\ssr\\\\create-next-app\\\\create-next-app\\\\pages\\\\index\\\\components\\\\seed-modal-print-logistics\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport './index.less';\nvar FormItem = _Form.Item;\n\nvar ValideModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ValideModal, _Component);\n\n  function ValideModal(props) {\n    var _this;\n\n    _classCallCheck(this, ValideModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ValideModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getRandomNumber\", function () {\n      _this.numberList = [];\n\n      for (var i = 0; i <= 3; i++) {\n        _this.numberList.push(Math.floor(Math.random() * 10));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (value, index) {\n      var that = _assertThisInitialized(_this);\n\n      if (value !== _this.numberList[index - 1]) {\n        document.querySelector(\".input\".concat(index)).classList.add('error');\n\n        for (var i = 1; i <= 4; i++) {\n          if (index !== i) {\n            _this.setState(_defineProperty({}, \"disabled\".concat(i), true));\n          }\n        }\n      } else {\n        for (var _i = 1; _i <= 4; _i++) {\n          _this.setState(_defineProperty({}, \"disabled\".concat(_i), false));\n        }\n      }\n\n      if (index === 4) return; // 最后一个 input 不添加焦点。\n\n      _this.setState({\n        focusIndex: index + 1\n      }, function () {\n        that[\"input\".concat(_this.state.focusIndex)].current.inputNumberRef.focus();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputGroup\", function () {\n      var getFieldDecorator = _this.props.form.getFieldDecorator;\n      var arr = [];\n\n      var _loop = function _loop(i) {\n        arr.push(React.createElement(FormItem, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, getFieldDecorator(\"value\".concat(i))(React.createElement(_InputNumber, {\n          className: \"input\".concat(i),\n          disabled: _this.state[\"disabled\".concat(i)],\n          max: 9,\n          onChange: function onChange(e) {\n            return _this.onChange(e, i);\n          },\n          ref: _this[\"input\".concat(i)],\n          autoFocus: i === 1 ? true : false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }))));\n      };\n\n      for (var i = 1; i <= 4; i++) {\n        _loop(i);\n      }\n\n      return React.createElement(_Form, {\n        className: \"input-group\",\n        layout: \"inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, arr);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onValide\", function () {\n      var inputValues = _this.props.form.getFieldsValue();\n\n      if (_Object$values(inputValues).join('') === _this.numberList.join('')) {\n        console.log('相等');\n\n        _this.props.onCancel();\n      } else {\n        _this.setState({\n          visibleWarn: true\n        });\n\n        alert('不相等');\n      }\n    });\n\n    _this.state = {\n      focusIndex: 1,\n      // 当前焦点的索引， 默认从第一个开始\n      visibleWarn: false,\n      disabled1: false,\n      disabled2: false,\n      disabled3: false,\n      disabled4: false\n    };\n\n    for (var i = 1; i <= 4; i++) {\n      _this[\"input\".concat(i)] = React.createRef();\n    }\n\n    _this.getRandomNumber();\n\n    return _this;\n  }\n\n  _createClass(ValideModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          visible = _this$state.visible,\n          onCancel = _this$state.onCancel;\n      return React.createElement(_Modal, {\n        width: 640,\n        maskClosable: false,\n        title: \"\\u6253\\u5370\\u7269\\u6D41\\u5355\",\n        wrapClassName: \"modal-valide-number modal-content-normal\",\n        destroyOnClose: true,\n        visible: visible,\n        onCancel: onCancel,\n        footer: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(_Button, {\n          onClick: this.onValide,\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"\\u786E\\u8BA4\"), React.createElement(_Button, {\n          onClick: onCancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\")),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"\\u6240\\u9009\\u5355\\u636E\\u5DF2\\u6253\\u5370\\u8FC7\\u7269\\u6D41\\u5355\\uFF0C\\u662F\\u5426\\u786E\\u8BA4\\u9700\\u8981\\u91CD\\u65B0\\u6253\\u5370\\uFF1F\\u82E5\\u9700\\u8981\\u91CD\\u65B0\\u6253\\u5370\\uFF0C\\u8BF7\\u8F93\\u5165\\u4EE5\\u4E0B\\u9A8C\\u8BC1\\u7801\\u70B9\\u51FB\\u201C\\u786E\\u8BA4\\u201D\\u6309\\u94AE\\u3002\"), React.createElement(\"div\", {\n        className: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, this.numberList.join('')), this.inputGroup());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props) {\n      return {\n        visible: props.visible,\n        onCancel: props.onCancel\n      };\n    }\n  }]);\n\n  return ValideModal;\n}(Component);\n\nexport default _Form.create()(ValideModal);","map":{"version":3,"sources":["E:/project/react/ssr/create-next-app/create-next-app/pages/index/components/seed-modal-print-logistics/index.js"],"names":["React","Component","FormItem","Item","ValideModal","props","numberList","i","push","Math","floor","random","value","index","that","document","querySelector","classList","add","setState","focusIndex","state","current","inputNumberRef","focus","getFieldDecorator","form","arr","e","onChange","inputValues","getFieldsValue","join","console","log","onCancel","visibleWarn","alert","disabled1","disabled2","disabled3","disabled4","createRef","getRandomNumber","visible","onValide","inputGroup","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Modal, InputNumber, Button, Form } from 'antd'\r\nimport './index.less'\r\n\r\nconst FormItem = Form.Item\r\nclass ValideModal extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            focusIndex: 1,  // 当前焦点的索引， 默认从第一个开始\r\n            visibleWarn: false,\r\n            disabled1: false,\r\n            disabled2: false,\r\n            disabled3: false,\r\n            disabled4: false,\r\n        }\r\n\r\n        for (let i = 1; i <= 4; i++) {\r\n            this[`input${i}`] = React.createRef()\r\n        }\r\n        this.getRandomNumber()\r\n    }\r\n    static getDerivedStateFromProps(props) {\r\n        return {\r\n            visible: props.visible,\r\n            onCancel: props.onCancel,\r\n        }\r\n    }\r\n    getRandomNumber = () => {\r\n        this.numberList = []\r\n        for (let i = 0; i <= 3; i++) {\r\n            this.numberList.push(Math.floor(Math.random() * 10))\r\n        }\r\n    }\r\n    onChange = (value, index) => {\r\n        let that = this\r\n        if (value !== this.numberList[index-1]) {\r\n            document.querySelector(`.input${index}`).classList.add('error')\r\n            for (let i = 1; i <= 4; i++) {\r\n                if (index !== i) {\r\n                    this.setState({ [`disabled${i}`]: true})\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 1; i <= 4; i++) {\r\n                this.setState({ [`disabled${i}`]: false})\r\n            }\r\n        }\r\n\r\n        if (index === 4) return  // 最后一个 input 不添加焦点。\r\n        this.setState({ focusIndex: index + 1 }, () => {\r\n            that[`input${this.state.focusIndex}`].current.inputNumberRef.focus()\r\n        })\r\n    }\r\n    inputGroup = () => {\r\n        const { getFieldDecorator } = this.props.form\r\n        let arr = [] \r\n        for (let i = 1; i <= 4; i++) {\r\n            arr.push(\r\n                <FormItem key={i}>\r\n                    {\r\n                        getFieldDecorator(`value${i}`)(\r\n                            <InputNumber className={`input${i}`} disabled={this.state[`disabled${i}`]} max={9} onChange={(e) => this.onChange(e, i)} ref={this[`input${i}`]} autoFocus={i === 1 ? true : false} />\r\n                        )\r\n                    }\r\n                </FormItem>\r\n\r\n            )\r\n        }\r\n        return <Form className=\"input-group\" layout=\"inline\">{arr}</Form>\r\n    }\r\n    onValide = () => {\r\n        const inputValues = this.props.form.getFieldsValue()\r\n        if (Object.values(inputValues).join('') === this.numberList.join('')) {\r\n            console.log('相等')\r\n            this.props.onCancel()\r\n        } else {\r\n            this.setState({ visibleWarn: true })\r\n            alert('不相等')\r\n        }\r\n    }\r\n    render() {\r\n        const { visible, onCancel } = this.state\r\n        return (\r\n            <Modal\r\n                width={640}\r\n                maskClosable={false}\r\n                title=\"打印物流单\"\r\n                wrapClassName=\"modal-valide-number modal-content-normal\"\r\n                destroyOnClose={true}\r\n                visible={visible}\r\n                onCancel={onCancel}\r\n                footer={\r\n                    <div>\r\n                        <Button onClick={this.onValide} type=\"primary\">确认</Button>\r\n                        <Button onClick={onCancel}>取消</Button>\r\n                    </div>\r\n                }\r\n            >\r\n                <p>所选单据已打印过物流单，是否确认需要重新打印？若需要重新打印，请输入以下验证码点击“确认”按钮。</p>\r\n                <div className=\"number\">{this.numberList.join('')}</div>\r\n                {this.inputGroup()}\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Form.create()(ValideModal)"]},"metadata":{},"sourceType":"module"}